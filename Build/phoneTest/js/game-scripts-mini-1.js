(function(e,t,n){"use strict";function m(e){return P(x(_(e),e.length*v))}function g(e){return H(x(_(e),e.length*v))}function y(e){return D(x(_(e),e.length*v))}function b(e,t){return P(A(e,t))}function w(e,t){return H(A(e,t))}function E(e,t){return D(A(e,t))}function S(){return m("abc")=="900150983cd24fb0d6963f7d28e17f72"}function x(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;var n=1732584193,r=-271733879,i=-1732584194,s=271733878;for(var o=0;o<e.length;o+=16){var u=n,a=r,f=i,l=s;n=N(n,r,i,s,e[o+0],7,-680876936),s=N(s,n,r,i,e[o+1],12,-389564586),i=N(i,s,n,r,e[o+2],17,606105819),r=N(r,i,s,n,e[o+3],22,-1044525330),n=N(n,r,i,s,e[o+4],7,-176418897),s=N(s,n,r,i,e[o+5],12,1200080426),i=N(i,s,n,r,e[o+6],17,-1473231341),r=N(r,i,s,n,e[o+7],22,-45705983),n=N(n,r,i,s,e[o+8],7,1770035416),s=N(s,n,r,i,e[o+9],12,-1958414417),i=N(i,s,n,r,e[o+10],17,-42063),r=N(r,i,s,n,e[o+11],22,-1990404162),n=N(n,r,i,s,e[o+12],7,1804603682),s=N(s,n,r,i,e[o+13],12,-40341101),i=N(i,s,n,r,e[o+14],17,-1502002290),r=N(r,i,s,n,e[o+15],22,1236535329),n=C(n,r,i,s,e[o+1],5,-165796510),s=C(s,n,r,i,e[o+6],9,-1069501632),i=C(i,s,n,r,e[o+11],14,643717713),r=C(r,i,s,n,e[o+0],20,-373897302),n=C(n,r,i,s,e[o+5],5,-701558691),s=C(s,n,r,i,e[o+10],9,38016083),i=C(i,s,n,r,e[o+15],14,-660478335),r=C(r,i,s,n,e[o+4],20,-405537848),n=C(n,r,i,s,e[o+9],5,568446438),s=C(s,n,r,i,e[o+14],9,-1019803690),i=C(i,s,n,r,e[o+3],14,-187363961),r=C(r,i,s,n,e[o+8],20,1163531501),n=C(n,r,i,s,e[o+13],5,-1444681467),s=C(s,n,r,i,e[o+2],9,-51403784),i=C(i,s,n,r,e[o+7],14,1735328473),r=C(r,i,s,n,e[o+12],20,-1926607734),n=k(n,r,i,s,e[o+5],4,-378558),s=k(s,n,r,i,e[o+8],11,-2022574463),i=k(i,s,n,r,e[o+11],16,1839030562),r=k(r,i,s,n,e[o+14],23,-35309556),n=k(n,r,i,s,e[o+1],4,-1530992060),s=k(s,n,r,i,e[o+4],11,1272893353),i=k(i,s,n,r,e[o+7],16,-155497632),r=k(r,i,s,n,e[o+10],23,-1094730640),n=k(n,r,i,s,e[o+13],4,681279174),s=k(s,n,r,i,e[o+0],11,-358537222),i=k(i,s,n,r,e[o+3],16,-722521979),r=k(r,i,s,n,e[o+6],23,76029189),n=k(n,r,i,s,e[o+9],4,-640364487),s=k(s,n,r,i,e[o+12],11,-421815835),i=k(i,s,n,r,e[o+15],16,530742520),r=k(r,i,s,n,e[o+2],23,-995338651),n=L(n,r,i,s,e[o+0],6,-198630844),s=L(s,n,r,i,e[o+7],10,1126891415),i=L(i,s,n,r,e[o+14],15,-1416354905),r=L(r,i,s,n,e[o+5],21,-57434055),n=L(n,r,i,s,e[o+12],6,1700485571),s=L(s,n,r,i,e[o+3],10,-1894986606),i=L(i,s,n,r,e[o+10],15,-1051523),r=L(r,i,s,n,e[o+1],21,-2054922799),n=L(n,r,i,s,e[o+8],6,1873313359),s=L(s,n,r,i,e[o+15],10,-30611744),i=L(i,s,n,r,e[o+6],15,-1560198380),r=L(r,i,s,n,e[o+13],21,1309151649),n=L(n,r,i,s,e[o+4],6,-145523070),s=L(s,n,r,i,e[o+11],10,-1120210379),i=L(i,s,n,r,e[o+2],15,718787259),r=L(r,i,s,n,e[o+9],21,-343485551),n=O(n,u),r=O(r,a),i=O(i,f),s=O(s,l)}return Array(n,r,i,s)}function T(e,t,n,r,i,s){return O(M(O(O(t,e),O(r,s)),i),n)}function N(e,t,n,r,i,s,o){return T(t&n|~t&r,e,t,i,s,o)}function C(e,t,n,r,i,s,o){return T(t&r|n&~r,e,t,i,s,o)}function k(e,t,n,r,i,s,o){return T(t^n^r,e,t,i,s,o)}function L(e,t,n,r,i,s,o){return T(n^(t|~r),e,t,i,s,o)}function A(e,t){var n=_(e);n.length>16&&(n=x(n,e.length*v));var r=Array(16),i=Array(16);for(var s=0;s<16;s++)r[s]=n[s]^909522486,i[s]=n[s]^1549556828;var o=x(r.concat(_(t)),512+t.length*v);return x(i.concat(o),640)}function O(e,t){var n=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(n>>16);return r<<16|n&65535}function M(e,t){return e<<t|e>>>32-t}function _(e){var t=Array(),n=(1<<v)-1;for(var r=0;r<e.length*v;r+=v)t[r>>5]|=(e.charCodeAt(r/v)&n)<<r%32;return t}function D(e){var t="",n=(1<<v)-1;for(var r=0;r<e.length*32;r+=v)t+=String.fromCharCode(e[r>>5]>>>r%32&n);return t}function P(e){var t=p?"0123456789ABCDEF":"0123456789abcdef",n="";for(var r=0;r<e.length*4;r++)n+=t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15);return n}function H(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="";for(var r=0;r<e.length*4;r+=3){var i=(e[r>>2]>>8*(r%4)&255)<<16|(e[r+1>>2]>>8*((r+1)%4)&255)<<8|e[r+2>>2]>>8*((r+2)%4)&255;for(var s=0;s<4;s++)r*8+s*6>e.length*32?n+=d:n+=t.charAt(i>>6*(3-s)&63)}return n}function Y(e){K=Math.round(e.alpha),$=Math.round(e.beta),J=Math.round(e.gamma)}var r="",i="",s="",o="",u,a=!1,f;e.init_wx_api=function(t){u=t,wx.config({debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["onMenuShareTimeline","onMenuShareQQ","onMenuShareQZone","onMenuShareAppMessage"]}),wx.ready(function(){a=!0,wx.checkJsApi({jsApiList:["onMenuShareTimeline"],success:function(t){e.isOpenInWeixin=!0}}),wx.onMenuShareAppMessage({title:r,desc:s,link:o,imgUrl:i,success:function(){f&&f()},cancel:function(){}}),wx.onMenuShareTimeline({title:r,desc:s,link:o,imgUrl:i,success:function(){},cancel:function(){}}),wx.onMenuShareQQ({title:r,desc:s,link:o,imgUrl:i,success:function(){f&&f()},cancel:function(){}}),wx.onMenuShareQZone({title:r,desc:s,link:o,imgUrl:i,success:function(){f&&f()},cancel:function(){}})})},e.set_wx_info=function(e,t,n,u,l){r=e,i=t,s=n,o=u,f=l;if(!a)return;wx.onMenuShareAppMessage({title:r,desc:s,link:o,imgUrl:i,success:function(){f&&f()},cancel:function(){}}),wx.onMenuShareTimeline({title:r,desc:s,link:o,imgUrl:i,success:function(){},cancel:function(){}}),wx.onMenuShareQQ({title:r,desc:s,link:o,imgUrl:i,success:function(){f&&f()},cancel:function(){}}),wx.onMenuShareQZone({title:r,desc:s,link:o,imgUrl:i,success:function(){f&&f()},cancel:function(){}})};var l=qc.defineBehaviour("qc.WeChat",qc.Behaviour,function(){var e=this;e.appId="",e.webAppId="",e.domain="",e.gameDomain="",e.redirectCurrentUrl=!0,e.debug=!1,e.wx=new c,e.onStartLogin=new qc.Signal,e.onLogin=new qc.Signal,e.sessionExpired=new qc.Signal,e.user=null,e.status=""},{appId:qc.Serializer.STRING,webAppId:qc.Serializer.STRING,domain:qc.Serializer.STRING,gameDomain:qc.Serializer.STRING,redirectCurrentUrl:qc.Serializer.BOOLEAN,debug:qc.Serializer.BOOLEAN});l.__menu="Plugins/WeChat",l.prototype.awake=function(){var t=this;if(!t.domain)return;var n=t.domain+"index.php?cmd=sign&appid="+t.appId+"&url="+encodeURIComponent(e.location.href);t.game.log.trace("开始请求微信分享的签名信息：{0}",n),qc.AssetUtil.get(n,function(e){t.game.log.trace("获取签名成功："+e),t.parseSign(e)},function(){console.error("获取签名信息失败")}),t.loadWXLib(),t._code=this.getParam("code"),t._state=this.getParam("state"),t._code&&(t.status="loggingIn",t.game.timer.add(1,function(){t.requestToken(t._code)}))},l.prototype.onDestroy=function(){this.timer&&this.game.timer.remove(this.timer)},l.prototype.login=function(){if(this.isWeChat()){this.loginInWX();return}this.loginInWeb()},l.prototype.loginInWX=function(){var t="",n=e.location.origin+e.location.pathname;this.redirectCurrentUrl?t="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+this.appId+"&redirect_uri="+encodeURIComponent(n)+"&response_type=code&scope=snsapi_userinfo&state=weixin#wechat_redirect":t="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+this.appId+"&redirect_uri="+encodeURIComponent(this.domain+"code.php")+"&response_type=code&scope=snsapi_userinfo"+"&state="+encodeURIComponent(n)+"#wechat_redirect",e.location.href=t},l.prototype.loginInWeb=function(){var t="",n=e.location.origin+e.location.pathname;this.redirectCurrentUrl?t="https://open.weixin.qq.com/connect/qrconnect?appid="+this.webAppId+"&redirect_uri="+encodeURIComponent(n)+"&response_type=code&scope=snsapi_login&state=pc#wechat_redirect":t="https://open.weixin.qq.com/connect/qrconnect?appid="+this.webAppId+"&redirect_uri="+encodeURIComponent(this.domain+"code.php")+"&response_type=code&scope=snsapi_login"+"&state="+encodeURIComponent(n)+"#wechat_redirect",e.location.href=t},l.prototype.parseSign=function(e){var t=this,n=JSON.parse(e);t.timeStamp=n.timestamp,t.nonceStr=n.nonceStr,t.signature=n.signature;if(!t.jweixin){t.game.timer.add(500,function(){t.parseSign(e)});return}t.game.log.trace("开始初始化微信接口"),t.wx.debug=t.debug,t.wx.init({timeStamp:t.timeStamp,nonceStr:t.nonceStr,signature:t.signature,appId:t.appId},function(){t.game.log.trace("初始化微信接口完成。")})},l.prototype.loadWXLib=function(){var e=this,t="http://res.wx.qq.com/open/js/jweixin-1.0.0.js",n=document.createElement("script");n.onerror=function(){console.error("加载jweixin库失败")},n.onload=function(){e.game.log.trace("微信接口下载完成"),e.jweixin=!0},n.setAttribute("src",t),n.setAttribute("type","text/javascript"),document.getElementsByTagName("head")[0].appendChild(n)},l.prototype.isWeChat=function(){var t=e.navigator.userAgent.toLowerCase();return t.match(/MicroMessenger/i)=="micromessenger"},l.prototype.getParam=function(e){var t=new RegExp("(\\?|#|&)"+e+"=([^&#]*)(&|#|$)"),n=location.href.match(t);return decodeURIComponent(n?n[2]:"")},l.prototype.requestToken=function(e){var t=this,n=t.gameDomain+"login.php?code="+e;t.isWeChat()||(n+="&web=1"),t.onStartLogin.dispatch(),qc.AssetUtil.get(n,function(e){var n=JSON.parse(e);if(n.error){t.game.log.error("换取token失败，重新请求登录"),t.login();return}t.game.log.trace("登录成功：{0}",e),t.status="loggedIn",t.user=n,t.onLogin.dispatch(),t.timer=t.game.timer.loop(3e5,t.refreshToken,t)})},l.prototype.refreshToken=function(){var e=this,t=e.gameDomain+"refresh.php";e.isWeChat()||(t+="?web=1"),qc.AssetUtil.get(t,function(t){var n=JSON.parse(t);if(n.error){e.status="expired",e.game.timer.remove(e.timer),delete e.timer,e.sessionExpired.dispatch();return}e.game.log.trace("刷新Access Token成功。")})};var c=qc.WX=function(){var e=this;e.title="",e.imgUrl="",e.desc="",e.url="",e.sign=null,e.ready=!1,e.debug=!1};c.prototype={},c.prototype.constructor=c,c.prototype.init=function(t,n){var r=this;r.sign=t;if(!e.wx)return;wx.config({debug:r.debug,appId:t.appId,timestamp:t.timeStamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["onMenuShareTimeline","onMenuShareQQ","onMenuShareQZone","onMenuShareAppMessage","onMenuShareWeibo","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","translateVoice","getNetworkType","openLocation","getLocation","closeWindow","scanQRCode"]}),wx.ready(function(){r.ready=!0,n&&n()})},c.prototype.share=function(e,t,n,r,i){var s=this;s.title=e,s.imgUrl=t,s.desc=n,s.url=r,s.callback=i;if(!s.ready){console.error("尚未初始化完成");return}var o={title:s.title,desc:s.desc,link:s.url,imgUrl:s.imgUrl,success:function(){i&&i()},cancel:function(){}};wx.onMenuShareTimeline(o),wx.onMenuShareAppMessage(o),wx.onMenuShareQQ(o),wx.onMenuShareWeibo(o),wx.onMenuShareQZone(o)},c.prototype.chooseImage=function(e,t,n,r){var i=this;if(!i.ready){console.error("尚未初始化完成");return}t||(t=["original","compressed"]),n||(n=["album","camera"]),wx.chooseImage({count:e,sizeType:t,sourceType:n,success:function(e){r&&r(e.localIds)}})},c.prototype.previewImage=function(e,t){var n=this;if(!n.ready){console.error("尚未初始化完成");return}e=e||"",t=t||[],wx.previewImage({current:e,urls:t})},c.prototype.uploadImage=function(e,t,n){var r=this;if(!r.ready){console.error("尚未初始化完成");return}wx.uploadImage({localId:e,isShowProgressTips:t?1:0,success:function(e){n&&n(e.serverId)}})},c.prototype.downloadImage=function(e,t,n){var r=this;if(!r.ready){console.error("尚未初始化完成");return}wx.downloadImage({serverId:e,isShowProgressTips:t?1:0,success:function(e){n&&n(e.localId)}})},c.prototype.startRecord=function(){var e=this;if(!e.ready){console.error("尚未初始化完成");return}wx.startRecord()},c.prototype.stopRecord=function(e){var t=this;if(!t.ready){console.error("尚未初始化完成");return}wx.stopRecord({success:function(t){e&&e(t.localId)}})},c.prototype.onVoiceRecordEnd=function(e){var t=this;if(!t.ready){console.error("尚未初始化完成");return}wx.onVoiceRecordEnd({complete:function(t){e&&e(t.localId)}})},c.prototype.playVoice=function(e){var t=this;if(!t.ready){console.error("尚未初始化完成");return}wx.playVoice({localId:e})},c.prototype.pauseVoice=function(e){var t=this;if(!t.ready){console.error("尚未初始化完成");return}wx.pauseVoice({localId:e})},c.prototype.stopVoice=function(e){var t=this;if(!t.ready){console.error("尚未初始化完成");return}wx.stopVoice({localId:e})},c.prototype.onVoicePlayEnd=function(e){var t=this;if(!t.ready){console.error("尚未初始化完成");return}wx.onVoicePlayEnd({success:function(t){e&&e(t.localId)}})},c.prototype.uploadVoice=function(e,t,n){var r=this;if(!r.ready){console.error("尚未初始化完成");return}wx.uploadVoice({localId:e,isShowProgressTips:t?1:0,success:function(e){n&&n(e.serverId)}})},c.prototype.downloadVoice=function(e,t,n){var r=this;if(!r.ready){console.error("尚未初始化完成");return}wx.downloadVoice({serverId:e,isShowProgressTips:t?1:0,success:function(e){n&&n(e.localId)}})},c.prototype.translateVoice=function(e,t,n){var r=this;if(!r.ready){console.error("尚未初始化完成");return}wx.translateVoice({localId:e,isShowProgressTips:t?1:0,success:function(e){n&&n(e.translateResult)}})},c.prototype.getNetworkType=function(e){var t=this;if(!t.ready){console.error("尚未初始化完成");return}wx.getNetworkType({success:function(t){e&&e(t.networkType)}})},c.prototype.openLocation=function(e,t,n,r,i,s){var o=this;if(!o.ready){console.error("尚未初始化完成");return}e=e||0,t=t||0,i=i||1,n=n||"",r=r||"",s=s||"",wx.openLocation({latitude:e,longitude:t,name:n,address:r,scale:i,infoUrl:s})},c.prototype.getLocation=function(e,t){var n=this;if(!n.ready){console.error("尚未初始化完成");return}e=e||"wgs84",wx.getLocation({type:e,success:t})},c.prototype.scanQRCode=function(e,t){var n=this;if(!n.ready){console.error("尚未初始化完成");return}wx.scanQRCode({needResult:e,scanType:["qrCode","barCode"],success:function(e){t&&t(e.resultStr)}})},c.prototype.closeWindow=function(){var e=this;if(!e.ready){console.error("尚未初始化完成");return}wx.closeWindow()},c.prototype.chooseWXPay=function(){};var h=qc.defineBehaviour("qc.TweenFunction",qc.Tween,function(){var e=this;e.funcName="",e.func=null,e.funcContext=null,e.enable=!1},{funcName:qc.Serializer.STRING});h.__menu="Plugins/TweenFunction",t.defineProperties(h.prototype,{funcName:{get:function(){return this._funcName},set:function(e){if(e===this._funcName)return;this._funcName=e,this.onEnable()}}}),h.prototype.onEnable=function(){if(this._funcName.length<=0)return;this.func=this.gameObject[this._funcName];var t=[];this.func&&(t.push(this.gameObject.class),this.func=this.func.bind(this.gameObject));var n=this;this.gameObject.scripts.forEach(function(e){var r=e[n._funcName];r&&(t.push(e.class),n.func=r.bind(e))}),!n.func&&this.enable&&this.game.log.important("TweenFunction({0}) not find!",this._funcName);if(t.length<=1)return;n.game.log.error("Error: Exist multi functions with same name: {0}",t);if(n.game.device.editor===!0){var r=e.parent&&e.parent.G;if(r){var i=r._("TweenFunction func error")+t;r.notification.error(i)}}},h.prototype.onUpdate=function(e,t){if(typeof this.func!="function")return;if(this.duration==0&&!t)return;this.func(e,this.duration)},h.begin=function(e,t,n){var r=qc.Tween.begin("qc.TweenFunction",e,t);return r.funcName=n,r};var p=0,d="",v=8,B=qc.defineBehaviour("qc.ServerCommunicate",qc.Behaviour,function(){this.url=""},{url:qc.Serializer.STRING});B.__menu="Plugins/ServerCommunicate",B.prototype.receiveResponse=function(t,n,r){if(t.status==0){this.game.log.trace("消息{0}没有收到回复。",n),r({ret:!1,reason:"no response"});return}if(t.status!=200){this.game.log.trace("消息{0}发送出错。",n),r({ret:!1,reason:t.statusText});return}var i=e.JSON.parse(t.responseText);i=i||{},this.game.log.trace("消息{0}收到回复:",n),this.game.log.trace(i),r(i)},B.prototype.sendMessage=function(t,n,r){var i=qc.AssetUtil.getXHR(),s=this.url+"/cmd";i.open("POST",s,!0),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.cmd=t,i.send(e.JSON.stringify(n));var o=this;i.onload=function(){return o.receiveResponse(i,t,r)},i.onerror=function(){return o.receiveResponse(i,t,r)}},B.sendMessage=function(e,t,n,r){var i=e.getScript("qc.ServerCommunicate");i.sendMessage(t,n,r)},B.login=function(e,t,n,r,i){r=r||{},r.username=t,r.password=m(n+"sdf1!@3fdd8*(+3dfFdkO%$@ffdln"),console.log(r),B.sendMessage(e,"LOGIN",r,i)},B.logout=function(t,n,r,i,s,o){i=i||{},i.username=n,i.password=m(r+"sdf1!@3fdd8*(+3dfFdkO%$@ffdln"),i.saveData=e.JSON.stringify(s),console.log(i),B.sendMessage(t,"LOGOUT",i,o)};var j=qc.defineBehaviour("qc.Plugins.LockOrientation",qc.Behaviour,function(){var e=this;e.orientation=e.game.device.orientation,e.desktop=!1,e.runInEditor=!0},{orientation:qc.Serializer.INT,desktop:qc.Serializer.BOOLEAN});j.__menu="Plugins/LockOrientation",t.defineProperties(j.prototype,{orientation:{get:function(){return this._orientation},set:function(e){if(e===this._orientation)return;this._orientation=e,this._doOrientation(this.game.device.orientation)}}}),j.prototype.awake=function(){var e=this,t=e.gameObject;e.game.world.onSizeChange.add(e._doOrientation,e),t.parent.onRelayout.add(e.assureSize,e),e._doOrientation(),e.assureSize()},j.prototype.onDestroy=function(){this.game.world.onSizeChange.remove(this._doOrientation,this),this.gameObject.parent.onRelayout.remove(this.assureSize,this)},j.prototype.assureSize=function(){var e=this,t=e.gameObject,n=t.parent.rect;e.game.device.rotate90===!0?(t.width=n.height,t.height=n.width):(t.width=n.width,t.height=n.height),t.setAnchor(new qc.Point(.5,.5),new qc.Point(.5,.5)),t.anchoredX=0,t.anchoredY=0,t.pivotX=.5,t.pivotY=.5},j.prototype._doOrientation=function(){var e=this,t=e.gameObject,n=e.game.device.orientation;if(!e.desktop&&!e.game.editor&&e.game.device.desktop){t.rotation=0,e.game.device.rotate90=!1;return}switch(e.orientation){case qc.Device.AUTO:default:t.rotation=0,e.game.device.rotate90=!1;return;case qc.Device.PORTRAIT:case qc.Device.LANDSCAPE:n===e.orientation?(t.rotation=0,e.game.device.rotate90=!1):(t.rotation=-Math.PI/2,e.game.device.rotate90=!0),e.assureSize()}};var F=qc.ScaleAdapter.prototype.getReferenceResolution;qc.ScaleAdapter.prototype.getReferenceResolution=function(){var e=F.call(this);return this.game.device.rotate90?new qc.Point(e.y,e.x):e};var I=qc.defineBehaviour("qc.Plugins.NodeFadeInOut",qc.Tween,function(){this.fadeType=I.FADE_IN,this.columnCount=1,this.rowCount=1,this.pivotX=.5,this.pivotY=.5,this.fadeStyle=I.STYLE_ZOOM,this.fadeEffect=I.EFFECT_XY,this.target=null},{fadeType:qc.Serializer.NUMBER,columnCount:qc.Serializer.NUMBER,rowCount:qc.Serializer.NUMBER,pivotX:qc.Serializer.NUMBER,pivotY:qc.Serializer.NUMBER,fadeStyle:qc.Serializer.NUMBER,fadeEffect:qc.Serializer.NUMBER,target:qc.Serializer.NODE});I.__menu="Plugins/NodeFadeInOut",t.defineProperties(I.prototype,{columnCount:{get:function(){return this._columnCount},set:function(e){e=isNaN(e)||e===0?1:e;if(e===this._columnCount)return;this._columnCount=e}},rowCount:{get:function(){return this._rowCount},set:function(e){e=isNaN(e)||e===0?1:e;if(e===this._rowCount)return;this._rowCount=e}},_cachedTarget:{get:function(){return this.target&&this.target._destroy&&(this.target=null),this.target||this.gameObject}}}),I.prototype.onEnable=function(){if(this._cachedTarget._destroy)return;this._cachedTarget.visible=!0,this._cachedTexture&&(this._cachedTexture.destroy(!0),this._cachedTexture=null),this._cachedBounds=this._cachedTarget.localBounds,this._cachedTexture=this._cachedTarget.generateTexture(),this._cachedSprite=new PIXI.Sprite(this._cachedTexture),this._cachedSprite.worldTransform=this._cachedTarget.worldTransform,this._cachedTarget.phaser.anchor&&(this._cachedSprite.anchor=this._cachedTarget.phaser.anchor),this._nodeRenderCanvas||(this._nodeRenderCanvas=this.gameObject.phaser._renderCanvas,this.gameObject.phaser._renderCanvas=this.renderCanvas.bind(this)),this._nodeRenderWebGL||(this._nodeRenderWebGL=this.gameObject.phaser._renderWebGL,this.gameObject.phaser._renderWebGL=this.renderWebGL.bind(this))},I.prototype.onDisable=function(){this._nodeRenderCanvas&&(this.gameObject.phaser._renderCanvas=this._nodeRenderCanvas,this._nodeRenderCanvas=null),this._nodeRenderWebGL&&(this.gameObject.phaser._renderWebGL=this._nodeRenderWebGL,this._nodeRenderWebGL=null),this._cachedTexture&&(this._cachedTexture.destroy(!0),this._cachedTexture=null),this._cachedSprite&&(this._cachedSprite=null),qc.Tween.prototype.onDisable.call(this)},I.prototype.onDestroy=function(){this._nodeRenderCanvas&&(this.gameObject.phaser._renderCanvas=this._nodeRenderCanvas,this._nodeRenderCanvas=null),this._nodeRenderWebGL&&(this.gameObject.phaser._renderWebGL=this._nodeRenderWebGL,this._nodeRenderWebGL=null),this._cachedTexture&&(this._cachedTexture.destroy(!0),this._cachedTexture=null),this._cachedSprite&&(this._cachedSprite=null),qc.Tween.prototype.onDestroy&&qc.Tween.prototype.onDestroy.call(this)},I.prototype.onUpdate=function(e,t){this._factorValue=this.fadeType===I.FADE_IN?1-e:e,t&&!this._cachedTarget._destroy&&this._cachedTarget===this.gameObject&&(this._cachedTarget.visible=this.fadeType===I.FADE_IN)},I.prototype.renderCanvas=function(e){this._cachedTarget!==this.gameObject&&this._nodeRenderCanvas.call(this.gameObject.phaser,e);var t=this._cachedTexture,n=this._cachedSprite,r=this._cachedBounds;if(t){var i=t.baseTexture.resolution/e.resolution;e.context.globalAlpha=n.worldAlpha,e.smoothProperty&&e.scaleMode!==t.baseTexture.scaleMode&&(e.scaleMode=t.baseTexture.scaleMode,e.context[e.smoothProperty]=e.scaleMode===PIXI.scaleModes.LINEAR);var s=t.trim?t.trim.x-n.anchor.x*t.trim.width:n.anchor.x*-t.frame.width,o=t.trim?t.trim.y-n.anchor.y*t.trim.height:n.anchor.y*-t.frame.height;e.roundPixels?(e.context.setTransform(n.worldTransform.a,n.worldTransform.b,n.worldTransform.c,n.worldTransform.d,n.worldTransform.tx*e.resolution|0,n.worldTransform.ty*e.resolution|0),s|=0,o|=0):e.context.setTransform(n.worldTransform.a,n.worldTransform.b,n.worldTransform.c,n.worldTransform.d,n.worldTransform.tx*e.resolution,n.worldTransform.ty*e.resolution);var u=t.crop.width/this.columnCount,a=t.crop.height/this.rowCount,f=this.fadeEffect===I.EFFECT_X||this.fadeEffect===I.EFFECT_XY,l=this.fadeEffect===I.EFFECT_Y||this.fadeEffect===I.EFFECT_XY,c=(f?1-this._factorValue:1)*u/i,h=(l?1-this._factorValue:1)*a/i,p=f&&this.fadeStyle===I.STYLE_CLIP?u*(1-this._factorValue):u,d=l&&this.fadeStyle===I.STYLE_CLIP?a*(1-this._factorValue):a;for(var v=0;v<t.crop.height;v+=a){var m=(o+v+a*(l?this._factorValue:0)*this.pivotY)/i+r.y;for(var g=0;g<t.crop.width;g+=u){var y=(s+g+u*(f?this._factorValue:0)*this.pivotX)/i+r.x;e.context.drawImage(t.baseTexture.source,t.crop.x+g,t.crop.y+v,p,d,y,m,c,h)}}}},I.prototype.renderWebGL=function(e){this._cachedTarget!==this.gameObject&&this._nodeRenderWebGL.call(this.gameObject.phaser,e);var t=this._cachedTexture,n=this._cachedBounds,r=this._cachedSprite,i=t._uvs;if(!i)return;var s=t.baseTexture.resolution/e.resolution,o=t.crop.width/this.columnCount,u=t.crop.height/this.rowCount,a=this.fadeEffect===I.EFFECT_X||this.fadeEffect===I.EFFECT_XY,f=this.fadeEffect===I.EFFECT_Y||this.fadeEffect===I.EFFECT_XY,l=(a?1-this._factorValue:1)*o/s,c=(f?1-this._factorValue:1)*u/s,h=a&&this.fadeStyle===I.STYLE_CLIP?o*(1-this._factorValue):o,p=f&&this.fadeStyle===I.STYLE_CLIP?u*(1-this._factorValue):u,d=r.worldTransform,v=d.a/s,m=d.b/s,g=d.c/s,y=d.d/s,b=d.tx,w=d.ty,E=i.x2-i.x0,S=i.y2-i.y0;for(var x=0;x<t.crop.height;x+=u){var T=(x+u*(f?this._factorValue:0)*this.pivotY)/s+n.y;for(var N=0;N<t.crop.width;N+=o){var C=(N+o*(a?this._factorValue:0)*this.pivotX)/s+n.x;this._webGLAddQuad(e.spriteBatch,r,C,T,C+l,T+c,i.x0+E*N/t.crop.width,i.y0+S*x/t.crop.height,i.x0+E*(N+h)/t.crop.width,i.y0+S*(x+p)/t.crop.height,v,m,g,y,b,w,r.tint)}}},I.prototype._webGLAddQuad=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){e.currentBatchSize>=e.size&&(e.flush(),e.currentBaseTexture=t.texture.baseTexture);var g=e.colors,y=e.positions,b=e.currentBatchSize*4*e.vertSize;e.renderSession.roundPixels?(y[b]=l*n+h*r+d|0,y[b+1]=p*r+c*n+v|0,y[b+5]=l*i+h*r+d|0,y[b+6]=p*r+c*i+v|0,y[b+10]=l*i+h*s+d|0,y[b+11]=p*s+c*i+v|0,y[b+15]=l*n+h*s+d|0,y[b+16]=p*s+c*n+v|0):(y[b]=l*n+h*r+d,y[b+1]=p*r+c*n+v,y[b+5]=l*i+h*r+d,y[b+6]=p*r+c*i+v,y[b+10]=l*i+h*s+d,y[b+11]=p*s+c*i+v,y[b+15]=l*n+h*s+d,y[b+16]=p*s+c*n+v),y[b+2]=o,y[b+3]=u,y[b+7]=a,y[b+8]=u,y[b+12]=a,y[b+13]=f,y[b+17]=o,y[b+18]=f,g[b+4]=g[b+9]=g[b+14]=g[b+19]=(m>>16)+(m&65280)+((m&255)<<16)+(t.worldAlpha*255<<24),e.sprites[e.currentBatchSize++]=t},I.FADE_IN=0,I.FADE_OUT=1,I.STYLE_ZOOM=0,I.STYLE_CLIP=1,I.EFFECT_XY=0,I.EFFECT_X=1,I.EFFECT_Y=2;var q=Phaser.Physics.Arcade=function(e){this.game=e,this.gravity=new Phaser.Point,this.bounds=new Phaser.Rectangle(0,0,e.world.width,e.world.height),this.checkCollision={up:!0,down:!0,left:!0,right:!0},this.maxObjects=10,this.maxLevels=4,this.OVERLAP_BIAS=4,this.forceX=!1,this.sortDirection=Phaser.Physics.Arcade.LEFT_RIGHT,this.skipQuadTree=!0,this.isPaused=!1,this.quadTree=new Phaser.QuadTree(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,this.maxObjects,this.maxLevels),this._total=0,this.setBoundsToWorld()};q.prototype={},q.prototype.constructor=q,q.SORT_NONE=0,q.LEFT_RIGHT=1,q.RIGHT_LEFT=2,q.TOP_BOTTOM=3,q.BOTTOM_TOP=4,q.prototype.setBounds=function(e,t,n,r){this.bounds.setTo(e,t,n,r)},q.prototype.setBoundsToWorld=function(){this.bounds.setTo(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height)},q.prototype.enable=function(e,t){typeof t=="undefined"&&(t=!0);var n=1;if(Array.isArray(e)){n=e.length;while(n--)e[n]instanceof Phaser.Group?this.enable(e[n].children,t):(this.enableBody(e[n]),t&&e[n].hasOwnProperty("children")&&e[n].children.length>0&&this.enable(e[n],!0))}else e instanceof Phaser.Group?this.enable(e.children,t):(this.enableBody(e),t&&e.hasOwnProperty("children")&&e.children.length>0&&this.enable(e.children,!0))},q.prototype.enableBody=function(e){e.hasOwnProperty("body")&&e.body===null&&(e.body=new Phaser.Physics.Arcade.Body(e))},q.prototype.updateMotion=function(e){var t=this.computeVelocity(0,e,e.angularVelocity,e.angularAcceleration,e.angularDrag,e.maxAngular)-e.angularVelocity;e.angularVelocity+=t,e.rotation+=e.angularVelocity*this.game.time.physicsElapsed,e.velocity.x=this.computeVelocity(1,e,e.velocity.x,e.acceleration.x,e.drag.x,e.maxVelocity.x),e.velocity.y=this.computeVelocity(2,e,e.velocity.y,e.acceleration.y,e.drag.y,e.maxVelocity.y)},q.prototype.computeVelocity=function(e,t,n,r,i,s){return typeof s=="undefined"&&(s=1e4),e===1&&t.allowGravity?n+=(this.gravity.x+t.gravity.x)*this.game.time.physicsElapsed:e===2&&t.allowGravity&&(n+=(this.gravity.y+t.gravity.y)*this.game.time.physicsElapsed),r?n+=r*this.game.time.physicsElapsed:i&&(i*=this.game.time.physicsElapsed,n-i>0?n-=i:n+i<0?n+=i:n=0),n>s?n=s:n<-s&&(n=-s),n},q.prototype.overlap=function(e,t,n,r,i){n=n||null,r=r||null,i=i||n,this._total=0;if(!Array.isArray(e)&&Array.isArray(t))for(var s=0;s<t.length;s++)this.collideHandler(e,t[s],n,r,i,!0);else if(Array.isArray(e)&&!Array.isArray(t))for(var s=0;s<e.length;s++)this.collideHandler(e[s],t,n,r,i,!0);else if(Array.isArray(e)&&Array.isArray(t))for(var s=0;s<e.length;s++)for(var o=0;o<t.length;o++)this.collideHandler(e[s],t[o],n,r,i,!0);else this.collideHandler(e,t,n,r,i,!0);return this._total>0},q.prototype.collide=function(e,t,n,r,i){n=n||null,r=r||null,i=i||n,this._total=0;if(!Array.isArray(e)&&Array.isArray(t))for(var s=0;s<t.length;s++)this.collideHandler(e,t[s],n,r,i,!1);else if(Array.isArray(e)&&!Array.isArray(t))for(var s=0;s<e.length;s++)this.collideHandler(e[s],t,n,r,i,!1);else if(Array.isArray(e)&&Array.isArray(t))for(var s=0;s<e.length;s++)for(var o=0;o<t.length;o++)this.collideHandler(e[s],t[o],n,r,i,!1);else this.collideHandler(e,t,n,r,i,!1);return this._total>0},q.prototype.sort=function(e){this.sortDirection===Phaser.Physics.Arcade.LEFT_RIGHT?e._hash.sort(function(e,t){return!e.body||!t.body?-1:e.body.x-t.body.x}):this.sortDirection===Phaser.Physics.Arcade.RIGHT_LEFT?e._hash.sort(function(e,t){return!e.body||!t.body?-1:t.body.x-e.body.x}):this.sortDirection===Phaser.Physics.Arcade.TOP_BOTTOM?e._hash.sort(function(e,t){return!e.body||!t.body?-1:e.body.y-t.body.y}):this.sortDirection===Phaser.Physics.Arcade.BOTTOM_TOP&&e._hash.sort(function(e,t){return!e.body||!t.body?-1:t.body.y-e.body.y})},q.prototype.collideHandler=function(e,t,n,r,i,s){if(!e||!t||!e.exists||!t.exists)return;this.sortDirection!==Phaser.Physics.Arcade.SORT_NONE&&(e.physicsType===Phaser.GROUP&&this.sort(e),t.physicsType===Phaser.GROUP&&this.sort(t)),this.collideSpriteVsSprite(e,t,n,r,i,s)},q.prototype.collideSpriteVsSprite=function(e,t,n,r,i,s){return!e.body||!t.body?!1:(this.separate(e.body,t.body,r,i,s)&&(n&&n.call(i,e,t),this._total++),!0)},q.prototype.separate=function(e,t,n,r,i){if(!e.enable||!t.enable||!this.intersects(e,t))return!1;if(n&&n.call(r,e.sprite,t.sprite)===!1)return!1;var s=!1;return this.forceX||Math.abs(this.gravity.y+e.gravity.y)<Math.abs(this.gravity.x+e.gravity.x)?s=this.separateX(e,t,i)||this.separateY(e,t,i):s=this.separateY(e,t,i)||this.separateX(e,t,i),i?!0:s},q.prototype.intersects=function(e,t){var n=Math.max(e.ccdIterations,t.ccdIterations);if(n<=0)return!(e.right<=t.x||e.bottom<=t.y||e.x>=t.right||e.y>=t.bottom);var r=e._dx/(n+2),i=t._dx/(n+2),s=e._dy/(n+2),o=t._dy/(n+2),u=Array(n+1),a=Array(n+1);u[n]=[e.x,e.right,e.y,e.bottom],a[n]=[t.x,t.right,t.y,t.bottom];for(var f=n-1;f>=0;f--)u[f]=[u[f+1][0]-r,u[f+1][1]-r,u[f+1][2]-s,u[f+1][3]-s];for(f=n-1;f>=0;f--)a[f]=[a[f+1][0]-i,a[f+1][1]-i,a[f+1][2]-o,a[f+1][3]-o];for(f=0;f<=n;f++){if(u[f][1]<=a[f][0]||u[f][3]<=a[f][2]||u[f][0]>=a[f][1]||u[f][2]>=a[f][3])continue;return e.x=u[f][0],e.y=u[f][2],t.x=a[f][0],t.y=a[f][2],!0}return!1},q.prototype.separateX=function(e,t,n){if(e.immovable&&t.immovable)return!1;var r=0;if(this.intersects(e,t)){var i=e.deltaAbsX()+t.deltaAbsX()+this.OVERLAP_BIAS;e.deltaX()===0&&t.deltaX()===0?(e.embedded=!0,t.embedded=!0):e.deltaX()>t.deltaX()?(r=e.right-t.x,r>i||e.checkCollision.right===!1||t.checkCollision.left===!1?r=0:(e.touching.none=!1,e.touching.right=!0,t.touching.none=!1,t.touching.left=!0)):e.deltaX()<t.deltaX()&&(r=e.x-t.width-t.x,-r>i||e.checkCollision.left===!1||t.checkCollision.right===!1?r=0:(e.touching.none=!1,e.touching.left=!0,t.touching.none=!1,t.touching.right=!0)),e.overlapX=r,t.overlapX=r;if(r!==0){if(n||e.customSeparateX||t.customSeparateX)return!0;var s=e.velocity.x,o=t.velocity.x;if(!e.immovable&&!t.immovable){r*=.5,e.x-=r,t.x+=r;var u=Math.sqrt(o*o*t.mass/e.mass)*(o>0?1:-1),a=Math.sqrt(s*s*e.mass/t.mass)*(s>0?1:-1),f=(u+a)*.5;u-=f,a-=f,e.velocity.x=f+u*e.bounce.x,t.velocity.x=f+a*t.bounce.x}else e.immovable?t.immovable||(t.x+=r,t.velocity.x=s-o*t.bounce.x,e.moves&&(t.y+=(e.y-e.prevY)*e.friction.y)):(e.x-=r,e.velocity.x=o-s*e.bounce.x,t.moves&&(e.y+=(t.y-t.prevY)*t.friction.y));return!0}}return!1},q.prototype.separateY=function(e,t,n){if(e.immovable&&t.immovable)return!1;var r=0;if(this.intersects(e,t)){var i=e.deltaAbsY()+t.deltaAbsY()+this.OVERLAP_BIAS;e.deltaY()===0&&t.deltaY()===0?(e.embedded=!0,t.embedded=!0):e.deltaY()>t.deltaY()?(r=e.bottom-t.y,r>i||e.checkCollision.down===!1||t.checkCollision.up===!1?r=0:(e.touching.none=!1,e.touching.down=!0,t.touching.none=!1,t.touching.up=!0)):e.deltaY()<t.deltaY()&&(r=e.y-t.bottom,-r>i||e.checkCollision.up===!1||t.checkCollision.down===!1?r=0:(e.touching.none=!1,e.touching.up=!0,t.touching.none=!1,t.touching.down=!0)),e.overlapY=r,t.overlapY=r;if(r!==0){if(n||e.customSeparateY||t.customSeparateY)return!0;var s=e.velocity.y,o=t.velocity.y;if(!e.immovable&&!t.immovable){r*=.5,e.y-=r,t.y+=r;var u=Math.sqrt(o*o*t.mass/e.mass)*(o>0?1:-1),a=Math.sqrt(s*s*e.mass/t.mass)*(s>0?1:-1),f=(u+a)*.5;u-=f,a-=f,e.velocity.y=f+u*e.bounce.y,t.velocity.y=f+a*t.bounce.y}else e.immovable?t.immovable||(t.y+=r,t.velocity.y=s-o*t.bounce.y,e.moves&&(t.x+=(e.x-e.prevX)*e.friction.x)):(e.y-=r,e.velocity.y=o-s*e.bounce.y,t.moves&&(e.x+=(t.x-t.prevX)*t.friction.x));return!0}}return!1},q.prototype.moveToObject=function(e,t,n,r){typeof n=="undefined"&&(n=60),typeof r=="undefined"&&(r=0);var i=Math.atan2(t.y-e.y,t.x-e.x);return r>0&&(n=this.distanceBetween(e,t)/(r/1e3)),e.body.velocity.x=Math.cos(i)*n,e.body.velocity.y=Math.sin(i)*n,i},q.prototype.velocityFromAngle=function(e,t,n){return typeof t=="undefined"&&(t=60),n=n||new Phaser.Point,n.setTo(Math.cos(this.game.math.degToRad(e))*t,Math.sin(this.game.math.degToRad(e))*t)},q.prototype.velocityFromRotation=function(e,t,n){return typeof t=="undefined"&&(t=60),n=n||new Phaser.Point,n.setTo(Math.cos(e)*t,Math.sin(e)*t)},q.prototype.accelerateToObject=function(e,t,n,r,i){typeof n=="undefined"&&(n=60),typeof r=="undefined"&&(r=1e3),typeof i=="undefined"&&(i=1e3);var s=this.angleBetween(e,t);return e.body.acceleration.setTo(Math.cos(s)*n,Math.sin(s)*n),e.body.maxVelocity.setTo(r,i),s},q.prototype.distanceBetween=function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)},q.prototype.angleBetween=function(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.atan2(r,n)},Phaser.Physics.Arcade.Body=function(e){this.sprite=e,this.qc=e._qc,this.game=e.game,this.type=Phaser.Physics.ARCADE,this.enable=!0,this.x=e.world.x,this.prevX=this.x,this.y=e.world.y,this.prevY=this.y,this.width=e.width,this.height=e.height,this.allowRotation=!0,this.rotation=e.rotation,this.preRotation=e.rotation,this.gravity=new Phaser.Point(0,0),this.ccdIterations=0,this.velocity=new Phaser.Point,this.newVelocity=new Phaser.Point(0,0),this.deltaMax=new Phaser.Point(0,0),this.acceleration=new Phaser.Point,this.drag=new Phaser.Point,this.allowGravity=!0,this.bounce=new Phaser.Point,this.maxVelocity=new Phaser.Point(1e4,1e4),this.friction=new Phaser.Point(1,0),this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=Phaser.NONE,this.immovable=!1,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,any:!0,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={up:!1,down:!1,left:!1,right:!1},this.dirty=!1,this._reset=!0,this._sx=e.scale.x,this._spx=this._sx,this._sy=e.scale.y,this._spy=this._sy,this._dx=0,this._dy=0};var R=Phaser.Physics.Arcade.Body;R.prototype={},R.prototype.constructor=R,t.defineProperties(R.prototype,{right:{get:function(){return this.x+this.width}},bottom:{get:function(){return this.y+this.height}}}),R.prototype.updateBounds=function(e){var t=this.qc.worldTransform,n=t.a,r=t.d,i=this.qc.parent.worldTransform;this._spx=i.a,this._spy=i.d;if(e||n!==this._sx||r!==this._sy)this._sx=n,this._sy=r,this.width=Math.abs(n*this.qc._width),this.height=Math.abs(r*this.qc._height),this._reset=!0},R.prototype.preUpdate=function(){if(!this.enable||this.game.physics.arcade.isPaused)return;this.dirty=!0,this.wasTouching.none=this.touching.none,this.wasTouching.up=this.touching.up,this.wasTouching.down=this.touching.down,this.wasTouching.left=this.touching.left,this.wasTouching.right=this.touching.right,this.touching.none=!0,this.touching.up=!1,this.touching.down=!1,this.touching.left=!1,this.touching.right=!1,this.blocked.up=!1,this.blocked.down=!1,this.blocked.left=!1,this.blocked.right=!1,this.embedded=!1,this.updateBounds(),this._sx>=0?this.x=this.sprite.world.x-this.sprite.anchor.x*this.width:this.x=this.sprite.world.x-(1-this.sprite.anchor.x)*this.width,this._sy>=0?this.y=this.sprite.world.y-this.sprite.anchor.y*this.height:this.y=this.sprite.world.y-(1-this.sprite.anchor.y)*this.height,this.rotation=this.sprite.angle,this.preRotation=this.rotation;if(this._reset||this.sprite.fresh)this.prevX=this.x,this.prevY=this.y;if(this.moves){this.game.physics.arcade.updateMotion(this),this.newVelocity.set(this.velocity.x*this.game.time.physicsElapsed,this.velocity.y*this.game.time.physicsElapsed),this.x+=this.newVelocity.x*this._spx,this.y+=this.newVelocity.y*this._spy;if(this.x!==this.prevX||this.y!==this.prevY)this.speed=Math.sqrt(this.velocity.x*this.velocity.x+this.velocity.y*this.velocity.y),this.angle=Math.atan2(this.velocity.y,this.velocity.x);this.collideWorldBounds&&this.checkWorldBounds()}this._dx=this.x-this.prevX,this._dy=this.y-this.prevY,this._reset=!1},R.prototype.postUpdate=function(){if(!this.enable||!this.dirty)return;this.dirty=!1;var e=this.x-this.prevX,t=this.y-this.prevY;e<0?this.facing=Phaser.LEFT:e>0&&(this.facing=Phaser.RIGHT),t<0?this.facing=Phaser.UP:t>0&&(this.facing=Phaser.DOWN),this.moves&&(this._dx=e,this._dy=t,this.deltaMax.x!==0&&this._dx!==0&&(this._dx<0&&this._dx<-this.deltaMax.x?(this._dx=-this.deltaMax.x,this.x=this._dx+this.prevX):this._dx>0&&this._dx>this.deltaMax.x&&(this._dx=this.deltaMax.x,this.x=this._dx+this.prevX)),this.deltaMax.y!==0&&this._dy!==0&&(this._dy<0&&this._dy<-this.deltaMax.y?(this._dy=-this.deltaMax.y,this.y=this._dy+this.prevY):this._dy>0&&this._dy>this.deltaMax.y&&(this._dy=this.deltaMax.y,this.y=this._dy+this.prevY)),this._dx!==0&&(this.qc.x+=this._dx/this._spx),this._dy!==0&&(this.qc.y+=this._dy/this._spy),this._reset=!0),this.allowRotation&&(this.sprite.angle+=this.deltaZ()),this.prevX=this.x,this.prevY=this.y},R.prototype.destroy=function(){this.sprite.body=null,this.sprite=null,this.qc=null},R.prototype.checkWorldBounds=function(){if(this.x<this.game.physics.arcade.bounds.x&&this.game.physics.arcade.checkCollision.left&&this._dx<0){var e=this.sprite._qc;this.x=this.game.physics.arcade.bounds.x,this.velocity.x*=-this.bounce.x,this.blocked.left=!0}else if(this.right>this.game.physics.arcade.bounds.right&&this.game.physics.arcade.checkCollision.right&&this._dx>0){var e=this.sprite._qc;this.x=this.game.physics.arcade.bounds.right-this.width,this.velocity.x*=-this.bounce.x,this.blocked.right=!0}if(this.y<this.game.physics.arcade.bounds.y&&this.game.physics.arcade.checkCollision.up&&this._dy<0){var e=this.sprite._qc;this.y=this.game.physics.arcade.bounds.y,this.velocity.y*=-this.bounce.y,this.blocked.up=!0}else if(this.bottom>this.game.physics.arcade.bounds.bottom&&this.game.physics.arcade.checkCollision.down&&this._dy>0){var e=this.sprite._qc;this.y=this.game.physics.arcade.bounds.bottom-this.height,this.velocity.y*=-this.bounce.y,this.blocked.down=!0}},R.prototype.reset=function(e,t){this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this._reset=!0},R.prototype.onFloor=function(){return this.blocked.down},R.prototype.onWall=function(){return this.blocked.left||this.blocked.right},R.prototype.deltaAbsX=function(){return this.deltaX()>0?this.deltaX():-this.deltaX()},R.prototype.deltaAbsY=function(){return this.deltaY()>0?this.deltaY():-this.deltaY()},R.prototype.deltaX=function(){return this.x-this.prevX},R.prototype.deltaY=function(){return this.y-this.prevY},R.prototype.deltaZ=function(){return this.rotation-this.preRotation};var U=qc.defineBehaviour("qc.arcade.RigidBody",qc.Behaviour,function(){var e=this;e.arcade=e.game.phaser.physics.arcade,e.phaser=e.gameObject.phaser,e._collide=[],e._overlap=[];if(!(e.gameObject instanceof qc.Sprite||e.gameObject instanceof qc.UIImage))throw new Error("Only Sprite or UIImage can attack RigidBody!");e.phaser.enableBody=!1,e.phaser.physicsBodyType=Phaser.Physics.ARCADE,e.arcade.enable(e.phaser,e.phaser.physicsBodyType,!1),e.phaser.body.enable=!1,e.phaser.body._qc=e},function(){return{mass:qc.Serializer.NUMBER,collideWorldBounds:qc.Serializer.BOOLEAN,allowRotation:qc.Serializer.BOOLEAN,allowGravity:qc.Serializer.BOOLEAN,velocity:qc.Serializer.POINT,maxVelocity:qc.Serializer.POINT,acceleration:qc.Serializer.POINT,drag:qc.Serializer.POINT,gravity:qc.Serializer.POINT,friction:qc.Serializer.POINT,angularVelocity:qc.Serializer.NUMBER,maxAngular:qc.Serializer.NUMBER,angularAcceleration:qc.Serializer.NUMBER,angularDrag:qc.Serializer.NUMBER,bounce:qc.Serializer.POINT,immovable:qc.Serializer.BOOLEAN,moves:qc.Serializer.BOOLEAN,checkCollision:qc.Serializer.MAPPING,tilePadding:qc.Serializer.POINT,collides:qc.Serializer.NODES,overlaps:qc.Serializer.NODES,ccdIterations:qc.Serializer.INT}});U.__menu="Plugins/Arcade/RigidBody",t.defineProperties(U.prototype,{mass:{get:function(){return this.phaser.body.mass},set:function(e){this.phaser.body.mass=e}},collideWorldBounds:{get:function(){return this.phaser.body.collideWorldBounds},set:function(e){this.phaser.body.collideWorldBounds=e}},allowRotation:{get:function(){return this.phaser.body.allowRotation},set:function(e){this.phaser.body.allowRotation=e}},allowGravity:{get:function(){return this.phaser.body.allowGravity},set:function(e){this.phaser.body.allowGravity=e}},velocity:{get:function(){return this.phaser.body.velocity},set:function(e){this.phaser.body.velocity=e}},maxVelocity:{get:function(){return this.phaser.body.maxVelocity},set:function(e){this.phaser.body.maxVelocity=e}},angularAcceleration:{get:function(){return this.phaser.body.angularAcceleration},set:function(e){this.phaser.body.angularAcceleration=e,this.gameObject._isTransformDirty=!0}},acceleration:{get:function(){return this.phaser.body.acceleration},set:function(e){this.phaser.body.acceleration=e}},drag:{get:function(){return this.phaser.body.drag},set:function(e){this.phaser.body.drag=e}},gravity:{get:function(){return this.phaser.body.gravity},set:function(e){this.phaser.body.gravity=e,this.gameObject._isTransformDirty=!0}},bounce:{get:function(){return this.phaser.body.bounce},set:function(e){this.phaser.body.bounce=e,this.gameObject._isTransformDirty=!0}},friction:{get:function(){return this.phaser.body.friction},set:function(e){this.phaser.body.friction=e,this.gameObject._isTransformDirty=!0}},angularVelocity:{get:function(){return this.phaser.body.angularVelocity},set:function(e){this.phaser.body.angularVelocity=e,this.gameObject._isTransformDirty=!0}},angularDrag:{get:function(){return this.phaser.body.angularDrag},set:function(e){this.phaser.body.angularDrag=e,this.gameObject._isTransformDirty=!0}},maxAngular:{get:function(){return this.phaser.body.maxAngular},set:function(e){this.phaser.body.maxAngular=e}},angle:{get:function(){return this.phaser.body.angle}},speed:{get:function(){return this.phaser.body.speed}},immovable:{get:function(){return this.phaser.body.immovable},set:function(e){this.phaser.body.immovable=e}},moves:{get:function(){return this.phaser.body.moves},set:function(e){this.phaser.body.moves=e,this.gameObject._isTransformDirty=!0}},overlapX:{get:function(){return this.phaser.body.overlapX}},overlapY:{get:function(){return this.phaser.body.overlapY}},embedded:{get:function(){return this.phaser.body.embedded},set:function(e){this.phaser.body.embedded=e}},checkCollision:{get:function(){return this.phaser.body.checkCollision},set:function(e){this.phaser.body.checkCollision=e}},touching:{get:function(){return this.phaser.body.touching}},wasTouching:{get:function(){return this.phaser.body.wasTouching}},blocked:{get:function(){return this.phaser.body.blocked},set:function(e){this.phaser.body.blocked=e}},tilePadding:{get:function(){return this.phaser.body.tilePadding},set:function(e){this.phaser.body.tilePadding=e}},onFloor:{get:function(){return this.phaser.body.onFloor()}},onWall:{get:function(){return this.phaser.body.onWall()}},deltaX:{get:function(){return this.phaser.body.deltaX()}},deltaY:{get:function(){return this.phaser.body.deltaY()}},deltaZ:{get:function(){return this.phaser.body.deltaZ()}},collides:{get:function(){return this._collide},set:function(e){this._collide=e}},overlaps:{get:function(){return this._overlap},set:function(e){this._overlap=e}},ccdIterations:{get:function(){return this.phaser.body.ccdIterations},set:function(e){this.phaser.body.ccdIterations=e}}}),U.prototype.awake=function(){var e=this.phaser.body;e.updateBounds(!0)},U.prototype.onEnable=function(){var e=this;e.phaser.enableBody=!0,e.phaser.body.enable=!0},U.prototype.onDisable=function(){var e=this;e.phaser.enableBody=!1,e.phaser.body.enable=!1},U.prototype.update=function(){var e=this;for(var t=0;t<e._collide.length;t++){var r=e._collide[t];if(!r||r._destroy)continue;e.arcade.collide(e.phaser,r.phaser,e._collideCallback,n,e)}for(var t=0;t<e._overlap.length;t++){var r=e._overlap[t];if(!r||r._destroy)continue;e.arcade.overlap(e.phaser,r.phaser,e._overlapCallback,n,e)}},U.prototype.reset=function(){this._collide=[],this._overlap=[],this.phaser.body.reset(this.gameObject.x,this.gameObject.y)},U.prototype.addCollide=function(e){this._collide.indexOf(e)===-1&&this._collide.push(e)},U.prototype.removeCollide=function(e){var t=this._collide.indexOf(e);t!==-1&&this._collide.splice(t,1)},U.prototype.addOverlap=function(e){this._overlap.indexOf(e)===-1&&this._overlap.push(e)},U.prototype.removeOverlap=function(e){var t=this._overlap.indexOf(e);t!==-1&&this._overlap.splice(t,1)},U.prototype.moveToObject=function(e,t,n){return this.arcade.moveToObject(this.phaser,e,t,n)},U.prototype.velocityFromAngle=function(e,t,n){return this.arcade.velocityFromAngle(e,t,n)},U.prototype.velocityFromRotation=function(e,t,n){return this.arcade.velocityFromRotation(e,t,n)},U.prototype.accelerateToObject=function(e,t,n,r){return this.arcade.accelerateToObject(this.phaser,e,t,n,r)},U.prototype.distanceBetween=function(e){return this.arcade.distanceBetween(this.phaser,e)},U.prototype.angleBetween=function(e){return this.arcade.angleBetween(this.phaser,e)},U.prototype._collideCallback=function(e,t){this.gameObject._sendMessage("onCollide",e._qc,t._qc)},U.prototype._overlapCallback=function(e,t){this.gameObject._sendMessage("onOverlap",e._qc,t._qc)},qc.keepRunning={},e.G=qc.keepRunning.G={},G.bgRun=!0,G.distance=0,G.offset=4,G.playerDead=!1,qc.initGame=function(e){e.log.trace("Start the game logic."),G.game=e};var z=qc.defineBehaviour("qc.demo.LoadingUI",qc.Behaviour,function(){this.clue=null,this.bg=null},{clue:qc.Serializer.NODE,bg:qc.Serializer.NODE});z.prototype.awake=function(){var e=this;e.game.state.onStartLoad.add(function(){e.show()}),e.game.state.onEndLoad.add(function(){e.gameObject.visible&&(e.duringTween?e.nextChange=1:e.hide())})},z.prototype.update=function(){var e=this,t=e.game.assets.loaded,n=e.game.assets.total;n?e.clue.text="拼命加载中：... "+t+"/"+n:e.clue.text="",e.gameObject.parent.setChildIndex(this.gameObject,e.gameObject.parent.children.length-1)},z.prototype.show=function(){var e=this,t=e.gameObject.getScript("qc.Plugins.NodeFadeInOut");e.gameObject.visible=!0,e.gameObject.alpha=0,t.stop(),t.enable=!1,t.target=e.gameObject.game.world,t.fadeType=I.FADE_OUT,t.fadeStyle=this.getRandomInt(0,2),t.fadeEffect=this.getRandomInt(0,3),t.pivotX=Math.random(0,1),t.pivotY=Math.random(0,1),t.columnCount=this.getRandomInt(1,32),t.rowCount=this.getRandomInt(1,32),t.resetToBeginning(),t.playForward(),e.gameObject.alpha=1,e.duringTween=!0,t.onFinished.addOnce(function(){e.duringTween=!1,e.nextChange&&(e.hide(),e.nextChange=0)})},z.prototype.hide=function(){var e=this,t=e.gameObject.getScript("qc.Plugins.NodeFadeInOut");e.gameObject.alpha=1,t.enable=!1,t.target=null,t.fadeType=I.FADE_OUT,t.fadeStyle=this.getRandomInt(0,2),t.fadeEffect=this.getRandomInt(0,3),t.pivotX=Math.random(0,1),t.pivotY=Math.random(0,1),t.columnCount=this.getRandomInt(1,32),t.rowCount=this.getRandomInt(1,32),t.resetToBeginning(),t.playForward(),e.duringTween=!0,t.onFinished.addOnce(function(){e.gameObject.visible=!1,e.duringTween=!1,e.nextChange=0})},z.prototype.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e))+e};var W=qc.defineBehaviour("qc.engine.bgLoop",qc.Behaviour,function(){this.bg1=null,this.bg2=null},{bg1:qc.Serializer.NODE,bg2:qc.Serializer.NODE});W.prototype.update=function(){};var X=qc.defineBehaviour("qc.engine.startGameBtnClicked",qc.Behaviour,function(){this.scene=""},{scene:qc.Serializer.STRING});X.prototype.onClick=function(){var e=this,t=function(){e.game.state.load(e.scene,!1,function(){},function(){console.log(e.scene+"场景加载完毕。")})};e.game.timer.add(1,t)};var V=qc.defineBehaviour("qc.engine.player",qc.Behaviour,function(){},{}),$=0,J=0,K=0;G.playerRotation=0;var Q=!0;e.DeviceOrientationEvent?e.addEventListener("deviceorientation",Y):(Q=!1,alert("您使用的浏览器不支持Device Orientation特性")),V.prototype.awake=function(){},V.prototype.update=function(){var e=this;G.playerDead===!0&&e.game.state.load("mainMenu",!1,function(){},function(){console.log(e.scene+"场景加载完毕。")})};var Z=qc.defineBehaviour("qc.engine.mathBtnClickJs",qc.Behaviour,function(){var e=this;e.mathtext=null,e.parent=null},{mathtext:qc.Serializer.NODE,parent:qc.Serializer.NODE}),et=!1;Z.prototype.awake=function(){var e=this;e.parent.init||(e.parent.init=!0,e.cal())},Z.prototype.cal=function(){var e=this;et=!1;var t=Math.ceil(Math.random()*100),n=Math.ceil(Math.random()*100),r=["+","-"],i=[-20,-10,0,10,20,0,0],s=i[Math.ceil(Math.random()*(i.length-1))],o=t+n+s;s===0&&(et=!0);var u=t+r[0]+n+"="+o;e.mathtext.text=u,G.game.log.trace("cal:"+et)},Z.prototype.onClick=function(){var e=this;G.game.log.trace("onClick:"+et),et===!0&&e.gameObject.name==="yes"||et===!1&&e.gameObject.name==="no"?(e.parent.destroy(),G.bgRun=!0):e.cal()};var tt=qc.defineBehaviour("qc.engine.mathbord",qc.Behaviour,function(){},{});tt.prototype.awake=function(){},tt.prototype.update=function(){var e=this,t=e.getScript("qc.arcade.RigidBody");G.bgRun===!1?t.moves=!1:t.moves=!0},tt.prototype.onCollide=function(e,t){G.bgRun=!1},tt.prototype.onClick=function(){};var nt=qc.defineBehaviour("qc.engine.keyLockJs",qc.Behaviour,function(){var e=this;e.keyL=null,e.keyR=null},{});nt.prototype.awake=function(){var e=this,t=["suo.png","suo1.png"];e.gameObject.frame=t[G.game.math.random(0,1)]},nt.prototype.update=function(){var e=this,t=e.getScript("qc.arcade.RigidBody");G.bgRun===!1?t.moves=!1:t.moves=!0},nt.prototype.onCollide=function(e,t){G.bgRun=!1},nt.prototype.onClick=function(){};var rt=qc.defineBehaviour("qc.engine.lockLJs",qc.Behaviour,function(){var e=this;e.parent=null,e.touchdone=!1},{parent:qc.Serializer.NODE});rt.prototype.awake=function(){var e=this,t=e.getScript("qc.arcade.RigidBody");t.addOverlap(e.parent);var n=["key.png","key1.png"];e.parent.keyL?(e.parent.keyL=="key.png"?e.gameObject.frame="key1.png":e.gameObject.frame="key.png",e.parent.keyL=null):(e.parent.keyL=n[G.game.math.random(0,1)],e.gameObject.frame=e.parent.keyL)},rt.prototype.onDragStart=function(e){var t=this,n=t.gameObject;t.oldPos=new qc.Point(n.x,n.y)},rt.prototype.onOverlap=function(e,t){var n=this;G.game.log.trace(n.parent.frame+n.gameObject.frame);if(n.parent.frame=="suo.png"&&n.gameObject.frame=="key.png"||n.parent.frame=="suo1.png"&&n.gameObject.frame=="key1.png")G.bgRun=!0,n.touchdone=!0,n.parent.destroy()},rt.prototype.onDrag=function(e){var t=this,n=t.gameObject,r=n.getWorldPosition();r.x+=e.source.deltaX,r.y+=e.source.deltaY,r=n.parent.toLocal(r),n.x=r.x,n.y=r.y},rt.prototype.onDragEnd=function(e){var t=this,n=t.gameObject;t.touchdone===!1&&(this.gameObject.x=this.oldPos.x,this.gameObject.y=this.oldPos.y)};var it=qc.defineBehaviour("qc.engine.gameJs",qc.Behaviour,function(){var e=this;e.timerCreateEnemy=null,e.player=null},{player:qc.Serializer.NODE});it.prototype.awake=function(){this.timerCreateEnemy=G.game.timer.loop(3e3,this.createEnemy,this)},it.prototype.update=function(){},it.prototype.createEnemy=function(){var e=this,t=G.game.math.random(0,8);G.bgRun===!0&&(t===0&&G.game.assets.load("fence","Assets/prefab/fence.bin",function(t){var n=G.game.assets.find("fence"),r=G.game.add.clone(n,e.gameObject),i=r.getScript("qc.arcade.RigidBody");i.addCollide(e.player)}),t===1&&G.game.assets.load("bird","Assets/prefab/bird.bin",function(t){var n=G.game.assets.find("bird"),r=G.game.add.clone(n,e.gameObject),i=r.getScript("qc.arcade.RigidBody");i.addCollide(e.player)}),t===2&&G.game.assets.load("arrowL","Assets/prefab/arrowL.bin",function(t){var n=G.game.assets.find("arrowL"),r=G.game.add.clone(n,e.gameObject),i=r.getScript("qc.arcade.RigidBody");i.addCollide(e.player)}),t===3&&G.game.assets.load("arrowR","Assets/prefab/arrowR.bin",function(t){var n=G.game.assets.find("arrowR"),r=G.game.add.clone(n,e.gameObject),i=r.getScript("qc.arcade.RigidBody");i.addCollide(e.player)}),t===4&&G.game.assets.load("keylock","Assets/prefab/keylock.bin",function(t){var n=G.game.assets.find("keylock"),r=G.game.add.clone(n,e.gameObject),i=r.getScript("qc.arcade.RigidBody");i.addCollide(e.player)}),t===5&&G.game.assets.load("cardbase","Assets/prefab/cardbase.bin",function(t){var n=G.game.assets.find("cardbase"),r=G.game.add.clone(n,e.gameObject),i=r.getScript("qc.arcade.RigidBody");i.addCollide(e.player)}),t===6&&G.game.assets.load("mathbord","Assets/prefab/mathbord.bin",function(t){var n=G.game.assets.find("mathbord"),r=G.game.add.clone(n,e.gameObject),i=r.getScript("qc.arcade.RigidBody");i.addCollide(e.player)}),t===7&&G.game.assets.load("finddif","Assets/prefab/finddif.bin",function(t){var n=G.game.assets.find("finddif"),r=G.game.add.clone(n,e.gameObject),i=r.getScript("qc.arcade.RigidBody");i.addCollide(e.player)}),t===8&&G.game.assets.load("dbarrow","Assets/prefab/dbarrow.bin",function(t){var n=G.game.assets.find("dbarrow"),r=G.game.add.clone(n,e.gameObject),i=r.getScript("qc.arcade.RigidBody");i.addCollide(e.player)}))};var st=qc.defineBehaviour("qc.engine.flyBirdJs",qc.Behaviour,function(){},{});st.prototype.awake=function(){},st.prototype.update=function(){var e=this;e.gameObject.y<0&&e.gameObject.destroy();var t=e.getScript("qc.arcade.RigidBody");G.bgRun===!1?t.moves=!1:t.moves=!0},st.prototype.onCollide=function(e,t){G.bgRun=!1,G.playerDead=!0},st.prototype.onClick=function(){var e=this;e.gameObject.destroy(),G.bgRun=!0};var ot=qc.defineBehaviour("qc.engine.finddifSubJs",qc.Behaviour,function(){var e=this;e.parent=null},{parent:qc.Serializer.NODE});ot.prototype.onClick=function(){var e=this;e.gameObject.frame==="grass2.png"&&(e.parent.destroy(),G.bgRun=!0)};var ut=qc.defineBehaviour("qc.engine.finddifJs",qc.Behaviour,function(){var e=this;e.k1=null,e.k2=null,e.k3=null,e.k4=null,e.k5=null,e.k6=null,e.k7=null,e.k8=null,e.k9=null},{k1:qc.Serializer.NODE,k2:qc.Serializer.NODE,k3:qc.Serializer.NODE,k4:qc.Serializer.NODE,k5:qc.Serializer.NODE,k6:qc.Serializer.NODE,k7:qc.Serializer.NODE,k8:qc.Serializer.NODE,k9:qc.Serializer.NODE});ut.prototype.awake=function(){var e=this,t=[e.k1,e.k2,e.k3,e.k4,e.k5,e.k6,e.k7,e.k8,e.k9];t[G.game.math.random(0,8)].frame="grass2.png"},ut.prototype.update=function(){var e=this,t=e.getScript("qc.arcade.RigidBody");G.bgRun===!1?t.moves=!1:t.moves=!0},ut.prototype.onCollide=function(e,t){G.bgRun=!1},ut.prototype.onClick=function(){};var at=qc.defineBehaviour("qc.engine.fenceJs",qc.Behaviour,function(){this.fence=null,this.player=null},{fence:qc.Serializer.NODE,player:qc.Serializer.NODE});at.prototype.awake=function(){},at.prototype.update=function(){var e=this,t=e.getScript("qc.arcade.RigidBody");G.bgRun===!1?t.moves=!1:t.moves=!0},at.prototype.onCollide=function(e,t){G.bgRun=!1},at.prototype.onClick=function(){this.gameObject.destroy(),G.bgRun=!0};var ft=qc.defineBehaviour("qc.engine.dbarrowJs",qc.Behaviour,function(){var e=this},{});ft.prototype.awake=function(){var e=this},ft.prototype.update=function(){var e=this,t=e.getScript("qc.arcade.RigidBody");G.bgRun===!1?t.moves=!1:t.moves=!0},ft.prototype.onCollide=function(e,t){G.bgRun=!1},ft.prototype.onClick=function(){};var lt=qc.defineBehaviour("qc.engine.dbarrowDragJs",qc.Behaviour,function(){var e=this;e.touchdone=!1,e.parent=null},{parent:qc.Serializer.NODE});lt.prototype.awake=function(){var e=this;e.parent.al=e.parent.al||!0,e.parent.ar=e.parent.ar||!0},lt.prototype.update=function(){},lt.prototype.onDragStart=function(e){var t=this,n=t.gameObject;t.oldPos=new qc.Point(n.x,n.y)},lt.prototype.onDrag=function(e){var t=this,n=t.gameObject;G.game.log.trace("al:"+t.parent.al+"   ar:"+t.parent.ar);var r=n.getWorldPosition();r.x+=e.source.deltaX,r.y+=e.source.deltaY,r=n.parent.toLocal(r),n.name==="arrowL"&&r.x<n.x&&(n.x=r.x,t.oldPos.x-r.x>100&&(t.touchdone=!0,tp=t.getScript("qc.TweenPosition"),tp.from.x=n.x,tp.play(),tp.onFinished.add(function(){t.parent.al=!1,G.game.log.trace("++++++++++++++++++++++arrowL+"),t.parent.ar===!1&&(G.bgRun=!0,t.touchdone=!0,t.parent.destroy())}))),n.name==="arrowR"&&r.x>n.x&&(n.x=r.x,r.x-t.oldPos.x>100&&(t.touchdone=!0,tp=t.getScript("qc.TweenPosition"),tp.from.x=n.x,tp.play(),tp.onFinished.add(function(){t.parent.ar=!1,G.game.log.trace("++++++++++++++++++++++arrowL+"),t.parent.al===!1&&(G.bgRun=!0,t.parent.destroy())})))},lt.prototype.onDragEnd=function(e){var t=this,n=t.gameObject;t.touchdone===!1&&(this.gameObject.x=this.oldPos.x)};var ct=qc.defineBehaviour("qc.engine.cardJs",qc.Behaviour,function(){var e=this;e.idx=1,e.parent=null},{parent:qc.Serializer.NODE});ct.prototype.awake=function(){var e=this},ct.prototype.update=function(){},ct.prototype.onCollide=function(e,t){G.bgRun=!1},ct.prototype.onClick=function(){var e=this,t=["card_26.png","card_28.png","card_38.png"];e.parent.frame==this.gameObject.frame?(e.parent.destroy(),G.bgRun=!0):e.parent.frame=t[G.game.math.random(0,2)]};var ht=qc.defineBehaviour("qc.engine.cardbase",qc.Behaviour,function(){var e=this;e.timerShow=null,e.idx=1},{});ht.prototype.awake=function(){var e=this},ht.prototype.update=function(){var e=this,t=e.getScript("qc.arcade.RigidBody");G.bgRun===!1?t.moves=!1:t.moves=!0;var n=["card_26.png","card_28.png","card_38.png"];e.idx++,e.idx%100===0&&(e.gameObject.frame=n[G.game.math.random(0,2)])},ht.prototype.onCollide=function(e,t){G.bgRun=!1};var pt=qc.defineBehaviour("qc.engine.arrowRJs",qc.Behaviour,function(){var e=this;e.touchdone=!1},{});pt.prototype.awake=function(){},pt.prototype.update=function(){var e=this,t=e.getScript("qc.arcade.RigidBody");(e.gameObject.y<0||e.gameObject.x<-e.gameObject.width/2)&&e.gameObject.destroy(),G.bgRun===!1?t.moves=!1:t.moves=!0},pt.prototype.onCollide=function(e,t){var n=this;G.bgRun=!1},pt.prototype.onClick=function(){},pt.prototype.onDragStart=function(e){var t=this,n=t.gameObject;t.oldPos=new qc.Point(n.x,n.y)},pt.prototype.onDrag=function(e){var t=this,n=t.gameObject,r=n.getWorldPosition();r.x+=e.source.deltaX,r.y+=e.source.deltaY,r=n.parent.toLocal(r),r.x<n.x&&(n.x=r.x,t.oldPos.x-r.x>100&&(G.bgRun=!0,t.touchdone=!0,tp=t.getScript("qc.TweenPosition"),tp.from.x=n.x,tp.play()))},pt.prototype.onDragEnd=function(e){var t=this,n=t.gameObject;t.touchdone===!1&&(this.gameObject.x=this.oldPos.x)};var dt=qc.defineBehaviour("qc.engine.arrowLJs",qc.Behaviour,function(){var e=this;e.touchdone=!1},{});dt.prototype.awake=function(){},dt.prototype.update=function(){var e=this,t=e.getScript("qc.arcade.RigidBody");(e.gameObject.y<0||e.gameObject.x>G.game.width+e.gameObject.width/2)&&e.gameObject.destroy(),G.bgRun===!1?t.moves=!1:t.moves=!0},dt.prototype.onCollide=function(e,t){var n=this;G.bgRun=!1},dt.prototype.onClick=function(){},dt.prototype.onDragStart=function(e){var t=this,n=t.gameObject;t.oldPos=new qc.Point(n.x,n.y)},dt.prototype.onDrag=function(e){var t=this,n=t.gameObject,r=n.getWorldPosition();r.x+=e.source.deltaX,r.y+=e.source.deltaY,r=n.parent.toLocal(r),r.x>n.x&&(n.x=r.x,r.x-t.oldPos.x>100&&(G.bgRun=!0,t.touchdone=!0,tp=t.getScript("qc.TweenPosition"),tp.from.x=n.x,tp.play()))},dt.prototype.onDragEnd=function(e){var t=this,n=t.gameObject;t.touchdone===!1&&(this.gameObject.x=this.oldPos.x)}}).call(this,this,Object)